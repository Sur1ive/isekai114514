import{E as re,H as x,G as C,I as de,S as K,J as ne,K as U,P as se,L as me,d as ve,o as fe,r as h,n as Me,O as ce,T as pe,f as a,c as _,e as G,t as v,g as q,F as he,Q as xe,p as J,h as w,R as ue,U as Ae,V as Te,m as p,_ as ye,u as ke,a as Pe,j as Ne,W as ge,w as Le,X as Se,i as F,Y as Ee,B as oe}from"./index-C_SY-bzJ.js";function Y(t,s,n){const l=s-n>0?s-n:0;return t*(50/(l+50))}function le(t,s,n,l,e,i){let g="",o="";return n.category===x.None?g=n.messageGenerator(t,s):g=t.name+C(n)+'<span style="color: blue;">'+Math.round(e)+"</span> ",l.category===x.None?o=l.messageGenerator(s,t):o=s.name+C(l)+'<span style="color: orange;">'+Math.round(i)+"</span> ","æ·éª°ï¼š"+g+o}function $e(t,s,n){function l(e,i){return e.name+"çœ‹èµ·æ¥ä¼¼ä¹ä¼šä½¿ç”¨"+i.name+"<br>"+re(e,i)}return Math.random()*t.getAbility().int>Math.random()*s.getAbility().int?l(s,n):"ä½ åˆ†è¾¨ä¸å‡º"+s.name+"å³å°†ä½¿ç”¨çš„åŠ¨ä½œ"}var k=(t=>(t.Win="Win",t.Lose="Lose",t.Withdraw="Withdraw",t.EnemyEscape="EnemyEscape",t))(k||{}),A=(t=>(t.PlayerWin="PlayerWin",t.EnemyWin="EnemyWin",t.Draw="Draw",t))(A||{});function We(t,s,n,l,e){var g,o;let i=A.Draw;return n.category===x.Capture&&(n.category=x.Attack),n.category===x.Attack&&l.category===x.Attack?i=De(t,s,n,l,e):n.category===x.Attack&&l.category===x.None||n.category===x.None&&l.category===x.Attack?i=Ie(t,s,n,l,e):n.category===x.Attack&&l.category===x.Defend||n.category===x.Defend&&l.category===x.Attack?i=Be(t,s,n,l,e):n.category===x.Dodge&&l.category===x.Attack||n.category===x.Attack&&l.category===x.Dodge?i=He(t,s,n,l,e):(e.push({playerName:t.name,enemyName:s.name,playerHitIcon:C(n),enemyHitIcon:C(l),playerPower:-1,enemyPower:-1,result:A.Draw,isNothing:!0,resultMessage:"æ— äº‹å‘ç”Ÿ",damage:0,damageTarget:"none",playerHpAfter:0,enemyHpAfter:0}),t.addTempLog("æ— äº‹å‘ç”Ÿ("+t.name+C(n)+" "+s.name+C(l)+")")),i===A.PlayerWin?(g=n.extraEffect)==null||g.call(n,t,s):i===A.EnemyWin&&((o=l.extraEffect)==null||o.call(l,s,t)),i}function Ce(t,s,n,l){const e=[];t.addTempLog(t.name+"ä½¿ç”¨äº†"+n.name+"ï¼Œ"+s.name+"ä½¿ç”¨äº†"+l.name);let i=0;for(;n.hits[i]||l.hits[i];){let g=n.hits[i]||de,o=l.hits[i]||de;t.statuses.sort((c,f)=>c.priority-f.priority).forEach(c=>{if(c.category===K.OnHitStart){const f=ne[c.type].effect;g=f(t,g,c.statusLevel)}}),s.statuses.sort((c,f)=>c.priority-f.priority).forEach(c=>{if(c.category===K.OnHitStart){const f=ne[c.type].effect;o=f(s,o,c.statusLevel)}}),t.updateStatusesOnHitStart(),s.updateStatusesOnHitStart();const u=We(t,s,g,o,e);if(e.length>0){const c=e[e.length-1];c.playerHpAfter=Math.ceil(t.health),c.enemyHpAfter=Math.ceil(s.health)}g.continuous&&u!==A.PlayerWin&&(n.hits.splice(i+1),t.addTempLog(t.name+"çš„è¿ç»­hitä¸­æ–­")),o.continuous&&u!==A.EnemyWin&&(l.hits.splice(i+1),t.addTempLog(s.name+"çš„è¿ç»­hitä¸­æ–­")),i++}return t.clearStatusByCategory(K.OnHitStart),s.clearStatusByCategory(K.OnHitStart),e}function De(t,s,n,l,e){const i=U(n.coeff,t.getAbility(),t.getActionCoeff(n.category)),g=U(l.coeff,s.getAbility(),s.getActionCoeff(l.category));t.addTempLog(le(t,s,n,l,i,g));let o,u,c,f;return i>=g?(o=A.PlayerWin,c=Y(i,s.getAbility().armor,t.getAbility().piercing),s.loseHp(c),u=n.messageGenerator(t,s),f="enemy",t.addTempLog(u+'é€ æˆäº†<span style="color: red;">'+Math.round(c)+"</span>ç‚¹ä¼¤å®³")):(o=A.EnemyWin,c=Y(g,t.getAbility().armor,s.getAbility().piercing),t.loseHp(c),u=l.messageGenerator(s,t),f="player",t.addTempLog(u+'é€ æˆäº†<span style="color: red;">'+Math.round(c)+"</span>ç‚¹ä¼¤å®³")),e.push({playerName:t.name,enemyName:s.name,playerHitIcon:C(n),enemyHitIcon:C(l),playerPower:Math.round(i),enemyPower:Math.round(g),result:o,isNothing:!1,resultMessage:u,damage:Math.round(c),damageTarget:f,playerHpAfter:0,enemyHpAfter:0}),o}function Ie(t,s,n,l,e){let i,g,o;l.category===x.None?(i=t,g=s,o=n):(i=s,g=t,o=l);const u=U(o.coeff,i.getAbility(),i.getActionCoeff(o.category));t.addTempLog(le(t,s,n,l,i.isPlayer?u:0,i.isPlayer?u:0));const c=Y(u,g.getAbility().armor,i.getAbility().piercing);g.loseHp(c);const f=o.messageGenerator(i,g);t.addTempLog(f+'é€ æˆäº†<span style="color: red;">'+Math.round(c)+"</span>ç‚¹ä¼¤å®³");const P=i instanceof se?A.PlayerWin:A.EnemyWin;return e.push({playerName:t.name,enemyName:s.name,playerHitIcon:C(n),enemyHitIcon:C(l),playerPower:i instanceof se?Math.round(u):-1,enemyPower:i instanceof se?-1:Math.round(u),result:P,isNothing:!1,resultMessage:f,damage:Math.round(c),damageTarget:i instanceof se?"enemy":"player",playerHpAfter:0,enemyHpAfter:0}),P}function Be(t,s,n,l,e){const i=U(n.coeff,t.getAbility(),t.getActionCoeff(n.category)),g=U(l.coeff,s.getAbility(),s.getActionCoeff(l.category)),o=n.category===x.Attack,u=o?t:s,c=o?s:t,f=o?n:l,P=o?l:n,D=o?i:g,L=o?g:i,$=D-L>0?D-L:0;t.addTempLog(le(t,s,n,l,i,g));const M=Y($,c.getAbility().armor,u.getAbility().piercing);c.loseHp(M);let T,E,W;return $>0?(T=o?A.PlayerWin:A.EnemyWin,E=f.messageGenerator(u,c)+`å‡»ç©¿äº†${c.name}çš„é˜²å¾¡`,W=c===t?"player":"enemy",t.addTempLog(f.messageGenerator(u,c)+`å‡»ç©¿äº†${c.name}çš„é˜²å¾¡ï¼Œé€ æˆäº†<span style="color: red;">`+Math.round(M)+`(-${Math.round(L)})</span>ç‚¹ä¼¤å®³`)):(T=o?A.EnemyWin:A.PlayerWin,E=P.messageGenerator(c,u)+"ï¼Œ"+f.messageGenerator(u,c)+"ä½†æ²¡æœ‰é€ æˆä¼¤å®³",W="none",t.addTempLog(P.messageGenerator(c,u)+","+f.messageGenerator(u,c)+"ä½†æ²¡æœ‰é€ æˆä¼¤å®³")),e.push({playerName:t.name,enemyName:s.name,playerHitIcon:C(n),enemyHitIcon:C(l),playerPower:Math.round(i),enemyPower:Math.round(g),result:T,isNothing:!1,resultMessage:E,damage:Math.round(M),damageTarget:W,playerHpAfter:0,enemyHpAfter:0}),T}function He(t,s,n,l,e){const i=U(n.coeff,t.getAbility(),t.getActionCoeff(n.category)),g=U(l.coeff,s.getAbility(),s.getActionCoeff(l.category)),o=n.category===x.Attack,u=o?t:s,c=o?s:t,f=o?n:l,P=o?l:n,D=o?i:g,L=o?g:i;t.addTempLog(le(t,s,n,l,i,g));let $,M,T=0,E;return D>L?($=o?A.PlayerWin:A.EnemyWin,T=Y(D,c.getAbility().armor,u.getAbility().piercing),c.loseHp(T),M=f.messageGenerator(u,c),E=c===t?"player":"enemy",t.addTempLog(M+"å¯¹"+c.name+'é€ æˆäº†<span style="color: red;">'+Math.round(T)+"</span>ç‚¹ä¼¤å®³")):($=o?A.EnemyWin:A.PlayerWin,u.addStatus(me.Unbalance,1),M=P.messageGenerator(c,u)+"ï¼Œ"+u.name+"å¤±è¡¡äº†",E="none",t.addTempLog(P.messageGenerator(c,u)+","+u.name+"å¤±è¡¡äº†")),e.push({playerName:t.name,enemyName:s.name,playerHitIcon:C(n),enemyHitIcon:C(l),playerPower:Math.round(i),enemyPower:Math.round(g),result:$,isNothing:!1,resultMessage:M,damage:Math.round(T),damageTarget:E,playerHpAfter:0,enemyHpAfter:0}),$}const Ge={class:"dice-content"},Oe={class:"dice-action-names"},Ve={class:"action-player"},ze={class:"action-enemy"},Re={class:"dice-header"},Ue={class:"dice-arena"},je={class:"dice-name player-color"},Fe={class:"dice-icon-display"},qe={key:0,class:"dice-na"},Je={key:1,class:"dice-number"},Ke={key:2,class:"dice-na"},Qe={class:"hp-bar-wrapper"},Xe={class:"hp-bar-bg"},Ye={class:"hp-bar-text"},Ze={class:"dice-name enemy-color"},et={class:"dice-icon-display"},tt={key:0,class:"dice-na"},at={key:1,class:"dice-number"},st={key:2,class:"dice-na"},ot={class:"hp-bar-wrapper"},nt={class:"hp-bar-bg"},lt={class:"hp-bar-text"},it={key:0,class:"dice-result-section"},rt={key:0,class:"dice-nothing-result"},ct=["innerHTML"],dt={class:"damage-icon"},ut={class:"damage-target-name"},gt={class:"damage-number"},mt={key:3,class:"dice-no-damage"},vt={class:"dice-hint"},ft=ve({__name:"DiceOverlay",props:{rolls:{},playerActionName:{},enemyActionName:{},playerHpStart:{},enemyHpStart:{},playerMaxHp:{},enemyMaxHp:{},autoMode:{type:Boolean}},emits:["complete"],setup(t,{emit:s}){const n=A.PlayerWin,l=A.EnemyWin,e=t,i=s,g=h(0),o=h("idle"),u=h(0),c=h(0),f=h(0),P=h(0),D=q(()=>e.playerMaxHp>0?Math.max(0,f.value/e.playerMaxHp*100):0),L=q(()=>e.enemyMaxHp>0?Math.max(0,P.value/e.enemyMaxHp*100):0);function $(m){return m>50?"#2ed573":m>25?"#ffa502":"#ff4757"}let M,T,E,W;const d=q(()=>e.rolls[g.value]??null),Z=q(()=>o.value==="result"&&!e.autoMode?"ç‚¹å‡»ç»§ç»­":"ç‚¹å‡»åŠ é€Ÿ"),ee=q(()=>{const m=d.value;return m?m.damageTarget==="player"?m.playerName:m.damageTarget==="enemy"?m.enemyName:"":""});function B(){M!==void 0&&clearInterval(M),T!==void 0&&clearTimeout(T),E!==void 0&&clearTimeout(E),W!==void 0&&clearTimeout(W),M=void 0,T=void 0,E=void 0,W=void 0}function j(){B();const m=d.value;if(!m){i("complete");return}if(m.isNothing){o.value="idle",T=window.setTimeout(()=>{o.value="result",f.value=m.playerHpAfter,P.value=m.enemyHpAfter,e.autoMode&&(W=window.setTimeout(()=>{H()},800))},500);return}Q()}function Q(){B();const m=d.value;if(!m)return;o.value="rolling";const N=Math.max(m.playerPower>0?m.playerPower:10,m.enemyPower>0?m.enemyPower:10),X=Math.max(Math.ceil(N*1.5),20);M=window.setInterval(()=>{m.playerPower>=0&&(u.value=Math.floor(Math.random()*X)),m.enemyPower>=0&&(c.value=Math.floor(Math.random()*X))},70),T=window.setTimeout(()=>{M!==void 0&&clearInterval(M),M=void 0,u.value=m.playerPower>=0?m.playerPower:0,c.value=m.enemyPower>=0?m.enemyPower:0,o.value="settled",E=window.setTimeout(()=>{V(m)},400)},1200)}function V(m){o.value="result",f.value=m.playerHpAfter,P.value=m.enemyHpAfter,e.autoMode&&(W=window.setTimeout(()=>{H()},1200))}function H(){B(),g.value<e.rolls.length-1?(g.value++,j()):i("complete")}function z(){const m=d.value;if(!m){i("complete");return}o.value==="rolling"?(B(),m.playerPower>=0&&(u.value=m.playerPower),m.enemyPower>=0&&(c.value=m.enemyPower),V(m),e.autoMode&&(B(),W=window.setTimeout(()=>{H()},400))):o.value==="settled"?(B(),V(m),e.autoMode&&(B(),W=window.setTimeout(()=>{H()},400))):o.value==="result"&&(B(),H())}return fe(()=>{f.value=e.playerHpStart,P.value=e.enemyHpStart,j()}),Me(()=>{B()}),(m,N)=>(p(),ce(pe,{to:"body"},[a("div",{class:"dice-overlay",onClick:z},[N[4]||(N[4]=a("div",{class:"dice-backdrop"},null,-1)),a("div",Ge,[a("div",Oe,[a("span",Ve,v(t.playerActionName),1),N[0]||(N[0]=a("span",{class:"action-vs"},"vs",-1)),a("span",ze,v(t.enemyActionName),1)]),a("div",Re," ç¬¬ "+v(g.value+1)+" / "+v(t.rolls.length)+" æ¬¡æ‹¼ç‚¹ ",1),d.value?(p(),_(he,{key:0},[a("div",Ue,[a("div",{class:J(["dice-side",{"side-damaged":o.value==="result"&&d.value.damageTarget==="player"&&d.value.damage>0}])},[a("div",je,v(d.value.playerName),1),a("div",Fe,v(d.value.playerHitIcon),1),a("div",{class:J(["dice-box player-box",{rolling:!d.value.isNothing&&o.value==="rolling",winner:!d.value.isNothing&&o.value==="result"&&d.value.result===w(n),loser:!d.value.isNothing&&o.value==="result"&&d.value.result===w(l),"nothing-box":d.value.isNothing}])},[d.value.isNothing?(p(),_("span",qe,"â€”")):d.value.playerPower>=0?(p(),_("span",Je,v(u.value),1)):(p(),_("span",Ke,"â€”"))],2),a("div",Qe,[a("div",Xe,[a("div",{class:"hp-bar-fill",style:ue({width:D.value+"%",background:$(D.value)})},null,4)]),a("div",Ye,v(f.value)+" / "+v(t.playerMaxHp),1)])],2),N[1]||(N[1]=a("div",{class:"dice-vs"},"VS",-1)),a("div",{class:J(["dice-side",{"side-damaged":o.value==="result"&&d.value.damageTarget==="enemy"&&d.value.damage>0}])},[a("div",Ze,v(d.value.enemyName),1),a("div",et,v(d.value.enemyHitIcon),1),a("div",{class:J(["dice-box enemy-box",{rolling:!d.value.isNothing&&o.value==="rolling",winner:!d.value.isNothing&&o.value==="result"&&d.value.result===w(l),loser:!d.value.isNothing&&o.value==="result"&&d.value.result===w(n),"nothing-box":d.value.isNothing}])},[d.value.isNothing?(p(),_("span",tt,"â€”")):d.value.enemyPower>=0?(p(),_("span",at,v(c.value),1)):(p(),_("span",st,"â€”"))],2),a("div",ot,[a("div",nt,[a("div",{class:"hp-bar-fill",style:ue({width:L.value+"%",background:$(L.value)})},null,4)]),a("div",lt,v(P.value)+" / "+v(t.enemyMaxHp),1)])],2)]),xe(Te,{name:"result-slide"},{default:Ae(()=>[o.value==="result"?(p(),_("div",it,[N[3]||(N[3]=a("div",{class:"dice-result-divider"},null,-1)),d.value.isNothing?(p(),_("div",rt," æ— äº‹å‘ç”Ÿ ")):(p(),_("div",{key:1,class:"dice-result-message",innerHTML:d.value.resultMessage},null,8,ct)),!d.value.isNothing&&d.value.damage>0?(p(),_("div",{key:2,class:J(["dice-damage",{"damage-to-player":d.value.damageTarget==="player","damage-to-enemy":d.value.damageTarget==="enemy"}])},[a("span",dt,v(d.value.damageTarget==="player"?"ğŸ’”":"ğŸ’¥"),1),a("span",ut,v(ee.value),1),a("span",gt,"-"+v(d.value.damage),1),N[2]||(N[2]=a("span",{class:"damage-label"},"HP",-1))],2)):!d.value.isNothing&&d.value.damage===0&&d.value.damageTarget==="none"?(p(),_("div",mt," ğŸ›¡ï¸ æœªé€ æˆä¼¤å®³ ")):G("",!0)])):G("",!0)]),_:1})],64)):G("",!0),a("div",vt,v(Z.value),1)])])]))}}),pt=ye(ft,[["__scopeId","data-v-6e04590b"]]),ht={key:0},yt={class:"form-check form-switch"},bt={class:"form-check-label",for:"autoModeSwitch"},_t={class:"settings-desc"},wt={class:"container mt-4"},Mt={class:"card mb-3"},xt={class:"card-header bg-danger text-white"},At={class:"mb-0"},Tt={style:{"font-size":"12px","margin-left":"10px"},class:"badge bg-secondary"},kt={class:"card-body"},Pt=["innerHTML"],Nt=["innerHTML"],Lt={class:"card-text"},St={class:"card mb-4"},Et={class:"card-header bg-success text-white"},$t={class:"mb-0"},Wt={class:"card-body"},Ct={class:"card-text"},Dt={key:0,class:"row mb-4"},It={class:"col-6"},Bt={class:"card-body text-center"},Ht={class:"card-title"},Gt={class:"card-text fst-italic"},Ot=["innerHTML"],Vt={class:"col-6"},zt={class:"card-body text-center"},Rt={class:"card-title"},Ut={class:"card-text fst-italic"},jt=["innerHTML"],Ft={key:1},qt={class:"container mt-4"},Jt={class:"card text-center shadow"},Kt={class:"card-body"},Qt={class:"card-title"},Xt={key:0,class:"text-success"},Yt={key:1,class:"text-danger"},Zt={key:2,class:"text-warning"},ea={key:3,class:"text-warning"},ta={key:4},aa={class:"text-info"},sa={key:0},oa=["innerHTML"],na={class:"battle-log-panel"},la={class:"battle-log-header"},ia=["innerHTML"],ra=ve({__name:"BattlePage",setup(t){const s=Ne(),n=ke(),l=Pe(),e=n.player;let i=null;const g=h(0),o=q(()=>(g.value,i)),u=h(null),c=h(null),f=h(null),P=h(""),D=h(!1),L=h(null),$=h(!1),M=h(null),T=h([]),E=h(""),W=h(""),d=h(0),Z=h(0),ee=h(0),B=h(0),j=h(!1),Q=h(!1),V=h(!1),H=h(!1),z=h(localStorage.getItem("battleDiceAutoMode")==="true");function m(){localStorage.setItem("battleDiceAutoMode",String(z.value))}function N(){g.value++}fe(()=>{if(!l.enemy||!e){s.push({name:"main-menu"});return}i=l.enemy,N(),e.isAtHome=!1,te()});function X(b){if(Q.value)return;const r=b,y=f.value,I=i,R=Math.ceil(e.health),S=Math.ceil(I.health);e.addTempLog("--------------------------å›åˆ-----------------------------");const O=Ce(e,I,r,y);O.length>0?(T.value=O,E.value=r.name,W.value=y.name,d.value=R,Z.value=S,ee.value=e.getMaxHealth(),B.value=I.getMaxHealth(),j.value=!0,Q.value=!0):te()}function be(){j.value=!1,Q.value=!1,N(),te()}function te(){const b=i;let r=b.getRandomAction();const y=$e(e,b,r);let I=e.getRandomAction(),R=e.getRandomAction();if(e.statuses.sort((S,O)=>S.priority-O.priority).forEach(S=>{if(S.category===K.OnTurnStart){const O=ne[S.type].effect,ie=O(e,I,R);I=ie.action1,R=ie.action2}}),b.statuses.sort((S,O)=>S.priority-O.priority).forEach(S=>{if(S.category===K.OnTurnStart){const O=ne[S.type].effect;r=O(b,r,r).action1}}),e.updateStatusesOnTurnStart(),b.updateStatusesOnTurnStart(),e.health<=0){e.addLog(e.name+"æ’‘ä¸ä½äº†"),e.clearStatus(),ae(k.Lose);return}if(b.health<1){e.addLog(e.name+"å‡»è´¥äº†"+b.name),e.clearStatus(),ae(k.Win);return}if(b.statuses.some(S=>S.type===me.Escaped)){e.addLog(b.name+"é€ƒè·‘äº†"),ae(k.EnemyEscape);return}n.save(),u.value=I,c.value=R,f.value=r,P.value=y,N()}function _e(){ae(k.Withdraw)}function ae(b){const r=i;if($.value=!1,M.value=null,b===k.Win){const y=r.randomDropItem();y&&(y.showItemToast(),M.value=y),e.exp+=Math.floor(r.giveExp),$.value=e.checkLevelUp(),e.exp=Math.floor(e.exp),e.addLog(r.name+"æ‰è½äº†<span style='color: gold;'>"+((y==null?void 0:y.name)??"æ— ")+"</span>"),y&&e.pack.push(y)}else b===k.Lose?(e.health=1,e.addLog(e.name+"æ‹¼æ­»ä»"+r.name+"çš„æ‰‹ä¸­é€ƒäº†å‡ºæ¥ï¼Œæ‹–ç€æ®‹ç ´çš„èº«èº¯ï¼Œå›åˆ°äº†åŸé•‡")):b===k.Withdraw?e.addLog(e.name+"åœ¨ä¸"+r.name+"çš„æˆ˜æ–—ä¸­é€ƒè·‘äº†"):b===k.EnemyEscape&&e.addLog(r.name+"é€ƒè·‘äº†");L.value=b,D.value=!0}function we(){const b=L.value,r=i,y=l.context;if(e.clearTempLogs(),n.save(),y===oe.Boss)if(b===k.Lose||b===k.Withdraw){const I=e.currentMapData.boss[0],R=I.health,S=r.health;R-S>r.getMaxHealth()*.2&&(I.health=S),n.save(),s.push({name:"main-menu"})}else{if(e.currentMapData.boss.shift(),e.currentMapData.boss.length>0){const I=e.currentMapData.boss[0];i=I,N(),l.startBattle(I,oe.Boss),D.value=!1,L.value=null,te();return}e.currentMapData.goingToNodeId?(e.goToNode(e.currentMapData.goingToNodeId),s.push({name:"map"})):s.push({name:"main-menu"})}else y===oe.NormalMonster?b===k.Lose||b===k.Withdraw||!e.currentMapData.goingToNodeId?s.push({name:"main-menu"}):(e.goToNode(e.currentMapData.goingToNodeId),s.push({name:"map"})):y===oe.StartPage&&(l.lastResult=b,s.push({name:"start",query:{afterBattle:b===k.Win?"win":"lose"}}))}return(b,r)=>(p(),_(he,null,[!D.value&&o.value&&w(e)?(p(),_("div",ht,[a("button",{type:"button",class:"btn btn-primary",style:{position:"absolute",left:"20px",top:"80px","z-index":"999"},onClick:_e}," é€ƒè·‘ "),a("button",{type:"button",class:"btn btn-dark",style:{position:"absolute",right:"20px",top:"80px","z-index":"999"},onClick:r[0]||(r[0]=y=>V.value=!0)}," ğŸ“œ è®°å½• "),a("button",{type:"button",class:"btn btn-dark",style:{position:"absolute",right:"20px",top:"125px","z-index":"999"},onClick:r[1]||(r[1]=y=>H.value=!H.value)}," âš™ï¸ è®¾ç½® "),H.value?(p(),_("div",{key:0,style:{position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh","z-index":"999"},onClick:r[2]||(r[2]=y=>H.value=!1)})):G("",!0),H.value?(p(),_("div",{key:1,class:"battle-settings-panel",onClick:r[4]||(r[4]=ge(()=>{},["stop"]))},[r[9]||(r[9]=a("div",{class:"settings-title"},"æˆ˜æ–—è®¾ç½®",-1)),a("div",yt,[Le(a("input",{id:"autoModeSwitch","onUpdate:modelValue":r[3]||(r[3]=y=>z.value=y),class:"form-check-input",type:"checkbox",onChange:m},null,544),[[Se,z.value]]),a("label",bt,v(z.value?"è‡ªåŠ¨æ·éª°":"æ‰‹åŠ¨æ·éª°"),1)]),a("div",_t,v(z.value?"æ·éª°åŠ¨ç”»è‡ªåŠ¨æ’­æ”¾ï¼Œç‚¹å‡»å¯åŠ é€Ÿ":"æ¯æ¬¡æ‹¼ç‚¹éœ€è¦æ‰‹åŠ¨ç‚¹å‡»è§¦å‘"),1)])):G("",!0),a("div",wt,[r[12]||(r[12]=a("h2",{class:"text-center mb-3"},"æˆ˜æ–—",-1)),a("div",Mt,[a("div",xt,[a("h4",At,[F(v(o.value.name)+" ",1),a("span",Tt,"lv."+v(o.value.level),1)])]),a("div",kt,[a("p",{class:"card-text fst-italic",innerHTML:'"'+o.value.description+'"'},null,8,Pt),a("p",{class:"card-text",innerHTML:P.value},null,8,Nt),a("p",Lt,[r[10]||(r[10]=F("HP: ",-1)),a("strong",null,v(Math.ceil(o.value.health)),1)])])]),r[13]||(r[13]=a("hr",null,null,-1)),a("div",St,[a("div",Et,[a("h4",$t,v(w(e).name),1)]),a("div",Wt,[a("p",Ct,[r[11]||(r[11]=F("HP: ",-1)),a("strong",null,v(Math.ceil(w(e).health)),1)])])]),u.value&&c.value?(p(),_("div",Dt,[a("div",It,[a("div",{class:"card bg-primary text-white",style:{cursor:"pointer"},onClick:r[5]||(r[5]=y=>X(u.value))},[a("div",Bt,[a("h5",Ht,v(u.value.name),1),a("p",Gt,'"'+v(u.value.description)+'"',1),a("p",{class:"card-text",innerHTML:w(re)(w(e),u.value)},null,8,Ot)])])]),a("div",Vt,[a("div",{class:"card bg-info text-white",style:{cursor:"pointer"},onClick:r[6]||(r[6]=y=>X(c.value))},[a("div",zt,[a("h5",Rt,v(c.value.name),1),a("p",Ut,'"'+v(c.value.description)+'"',1),a("p",{class:"card-text",innerHTML:w(re)(w(e),c.value)},null,8,jt)])])])])):G("",!0)])])):D.value&&o.value&&w(e)?(p(),_("div",Ft,[a("div",qt,[a("div",Jt,[r[18]||(r[18]=a("div",{class:"card-header bg-dark text-white"},[a("h2",{class:"mb-0"},"æˆ˜æ–—ç»“æŸ")],-1)),a("div",Kt,[a("h4",Qt,[F(v(w(e).name)+" ",1),L.value===w(k).Win?(p(),_("span",Xt,"èƒœåˆ©")):L.value===w(k).Lose?(p(),_("span",Yt,"å¤±è´¥")):L.value===w(k).EnemyEscape?(p(),_("span",Zt,"æ•Œäººé€ƒè·‘äº†")):(p(),_("span",ea,"é€ƒè·‘")),a("p",null," lv: "+v(w(e).level)+v($.value?"ğŸ”º":"")+" exp: "+v(w(e).exp)+"/"+v(w(e).getNextLevelExp()),1),L.value===w(k).Win?(p(),_("p",ta,[r[15]||(r[15]=F(" è·å¾—ç»éªŒ: ",-1)),a("span",aa,v(Math.floor(o.value.giveExp)),1),M.value?(p(),_("span",sa,[r[14]||(r[14]=F(" è·å¾—ç‰©å“: ",-1)),a("span",{class:J("text-"+w(Ee)[M.value.rarity])},v(M.value.name),3)])):G("",!0)])):G("",!0)]),r[16]||(r[16]=a("hr",null,null,-1)),r[17]||(r[17]=a("h5",null,"è®°å½•",-1)),a("div",{class:"border rounded p-3",style:{"max-height":"250px","overflow-y":"auto"},innerHTML:w(e).getTempLogs()},null,8,oa)]),a("div",{class:"card-footer"},[a("button",{class:"btn btn-primary",onClick:we},"ç»§ç»­")])])])])):G("",!0),j.value?(p(),ce(pt,{key:2,rolls:T.value,"player-action-name":E.value,"enemy-action-name":W.value,"player-hp-start":d.value,"enemy-hp-start":Z.value,"player-max-hp":ee.value,"enemy-max-hp":B.value,"auto-mode":z.value,onComplete:be},null,8,["rolls","player-action-name","enemy-action-name","player-hp-start","enemy-hp-start","player-max-hp","enemy-max-hp","auto-mode"])):G("",!0),(p(),ce(pe,{to:"body"},[V.value?(p(),_("div",{key:0,class:"battle-log-overlay",onClick:r[8]||(r[8]=ge(y=>V.value=!1,["self"]))},[a("div",na,[a("div",la,[r[19]||(r[19]=a("h5",{class:"mb-0"},"æˆ˜æ–—è®°å½•",-1)),a("button",{type:"button",class:"btn-close btn-close-white","aria-label":"å…³é—­",onClick:r[7]||(r[7]=y=>V.value=!1)})]),a("div",{class:"battle-log-body",innerHTML:w(e).getTempLogs()},null,8,ia)])])):G("",!0)]))],64))}}),da=ye(ra,[["__scopeId","data-v-4dbe4b54"]]);export{da as default};
