import{d as h,u as b,o as g,g as u,j as _,n as x,c as w,e as M,f as t,r as R,i as T,p as C,h as o,C as c,t as l,q as v,m as L}from"./index-Bpg2grl2.js";const k="/isekai114514/assets/player-8N5Sf3fj.gif",H={key:0},N={class:"card mb-4 shadow-sm"},D={class:"card-body"},I=["innerHTML"],B={class:"text-center"},P={class:"card-title mb-1"},S={class:"text-muted"},j=["innerHTML"],V={class:"text-center mt-3"},z=["src"],E={class:"mt-auto"},$={class:"row g-3 justify-content-center"},q={class:"col-12 col-md-4"},A={class:"col-12 col-md-4"},U={class:"col-12 col-md-4"},W={class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},F={class:"offcanvas-body"},G={style:{"max-height":"60vh","overflow-y":"auto"}},J=["innerHTML"],Q=h({__name:"MainMenu",setup(K){const i=_(),n=b(),e=u(()=>n.player),d=R("");let r;const m=u(()=>{if(!e.value)return"";const a=v(e.value.currentMapData.currentRegionId);return(a==null?void 0:a.name)||"未知"});g(()=>{if(!e.value){i.push({name:"start"});return}e.value.isAtHome=!0,e.value.clearCurrentMapDataWithoutBoss(),n.save(),n.updateTitle();const a=()=>{n.player&&(d.value=n.player.getHealthDisplay())};a(),r=window.setInterval(a,1e3)}),x(()=>{r!==void 0&&clearInterval(r)});function p(){if(!e.value)return;const a=v(e.value.currentMapData.currentRegionId);a&&(e.value.goToNode(a.startNode.id),i.push({name:"map"}))}function f(){window.confirm("你确定要 remake 吗？")&&(n.reset(),window.location.reload())}return(a,s)=>e.value?(L(),w("div",H,[t("div",N,[t("div",D,[t("div",{id:"health-display",class:"mb-3",innerHTML:d.value},null,8,I),t("div",B,[t("h2",P,[t("span",{class:C(["badge ms-2",e.value.type===o(c).Player114514?"bg-danger":"bg-primary"]),style:{"font-size":"0.75rem",padding:"0.35em 0.5em"}},l(e.value.type===o(c).Player114514?"野兽":"人类"),3),T(" "+l(e.value.name)+" ",1),t("small",S," lv "+l(e.value.level),1)]),t("div",{id:"exp-display",class:"mt-2",style:{"max-width":"200px",margin:"0 auto"},innerHTML:e.value.getExpDisplay()},null,8,j)]),t("div",V,[t("img",{src:o(k),alt:"玩家形象",class:"img-fluid",style:{"max-height":"200px"}},null,8,z)])])]),t("div",E,[t("div",$,[t("div",q,[t("button",{class:"btn btn-primary w-100 py-3",onClick:p},l(e.value.type===o(c).Player114514?"救世啊！":"动身")+" 现在地点: "+l(m.value),1)]),t("div",A,[t("button",{class:"btn btn-primary w-100 py-3",onClick:s[0]||(s[0]=y=>o(i).push({name:"map-list"}))},"快速旅行")]),t("div",U,[t("button",{class:"btn btn-success w-100 py-3",onClick:s[1]||(s[1]=y=>o(i).push({name:"status"}))},"状态")]),t("div",{class:"col-12 col-md-4"},[t("button",{class:"btn btn-danger w-100 py-3",onClick:f},"秽土转生")])]),s[2]||(s[2]=t("div",{class:"text-center mt-4"},[t("button",{class:"btn btn-info",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight"}," 查看记录 ")],-1))]),t("div",W,[s[3]||(s[3]=t("div",{class:"offcanvas-header"},[t("h5",{class:"offcanvas-title",id:"offcanvasRightLabel"},"记录"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"关闭"})],-1)),t("div",F,[t("div",G,[t("p",{innerHTML:e.value.getLastNLog(100)},null,8,J)])])]),s[4]||(s[4]=t("div",{class:"mt-auto"},null,-1)),s[5]||(s[5]=t("div",{class:"mt-auto"},null,-1))])):M("",!0)}});export{Q as default};
